---
title: "Cran Lookup"
author: "Simon Bond"
date: "`r Sys.Date()`"
output: html_document
---

```{r}
library(tidyverse)
library(rvest)

pks <- library()$results %>%
  as.data.frame %>%  
  filter( LibPath=="/usr/local/lib/R/site-library", Package!="cctu") %>% 
  pull(Package)

url <- paste0("https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/",pks,"-00check.html")
status <- rep(NA, length(url))
for( i in 1:length(url)){
  status[i] <- read_html(url[i]) %>% 
    html_element("p") %>% 
    html_text %>% 
    gsub("\\nStatus:","",.) %>% 
    gsub("\\n","",.)
}

link <- paste0("<a href=\"",url,"\">",pks,"</a>" )

knitr::kable(cbind(link, status ),
             format="html",
             escape=FALSE)
```


OK  but we want to match to the dates/version and ideally ROcker etc for the packages

             